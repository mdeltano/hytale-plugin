---
title: "Death Event"
description: "Learn how to use the OnDeathSystem."
authors:
    - name: "Bird"
      link: "https://discord.com/users/495709580068651009"
---

# Overview

In this guide, you'll learn how to use the OnDeathSystem to detect when a player dies.

## Code Example

```java
package org.example.plugin.Systems;

import com.hypixel.hytale.component.CommandBuffer;
import com.hypixel.hytale.component.Ref;
import com.hypixel.hytale.component.Store;
import com.hypixel.hytale.component.query.Query;
import com.hypixel.hytale.server.core.Message;
import com.hypixel.hytale.server.core.entity.entities.Player;
import com.hypixel.hytale.server.core.modules.entity.damage.Damage;
import com.hypixel.hytale.server.core.modules.entity.damage.DeathComponent;
import com.hypixel.hytale.server.core.modules.entity.damage.DeathSystems;
import com.hypixel.hytale.server.core.universe.Universe;
import com.hypixel.hytale.server.core.universe.world.storage.EntityStore;

import javax.annotation.Nonnull;

public class TestDeathSystem extends DeathSystems.OnDeathSystem {

    @Nonnull
    @Override
    public Query<EntityStore> getQuery() {
        return Query.and(Player.getComponentType());
    }

    @Override
    public void onComponentAdded(@Nonnull Ref ref, @Nonnull DeathComponent component, @Nonnull Store store, @Nonnull CommandBuffer commandBuffer) {
        Player playerComponent = (Player) store.getComponent(ref, Player.getComponentType());

        assert playerComponent != null;

        Universe.get().sendMessage(Message.raw("Death player: " + playerComponent.getDisplayName()));
        Damage deathInfo = component.getDeathInfo();
        if (deathInfo != null) {
            Universe.get().sendMessage(Message.raw("Death info amount: " + deathInfo.getAmount()));
        }
    }
}
```

## Steps

### 1. Extend the Death System

```java
public class TestDeathSystem extends DeathSystems.OnDeathSystem {
```

---

### 2. Define Which Entities This System Applies To

```java
@Nonnull
@Override
public Query<EntityStore> getQuery() {
    return Query.and(Player.getComponentType());
}
```

* Filter entities to **players only**

---

### 3. Listen for the Death Event

```java
@Override
public void onComponentAdded(
        @Nonnull Ref ref,
        @Nonnull DeathComponent component,
        @Nonnull Store store,
        @Nonnull CommandBuffer commandBuffer
) {
```

This method is automatically called when:

* A `DeathComponent` is added to an entity matching your query (players)

---

### 4. Get the Player Component

```java
Player playerComponent = (Player) store.getComponent(ref, Player.getComponentType());
```

* Fetches the `Player` component from the dead entity

---

### 5. Get Death Damage Information

```java
Damage deathInfo = component.getDeathInfo();
```

* Lets you access death info such as amount and source